# 岗位信息录入升级指南

## 🎯 升级目标

将岗位数据结构从"基础可用"升级到"吸引力十足"，通过添加关键字段让AI搜索的rerank分数大幅提升，让好岗位脱颖而出。

## 📋 需要执行的数据库操作

### 第1步：执行数据库表结构升级

在Supabase控制台的SQL Editor中执行 `add-missing-job-fields.sql` 文件：

```sql
-- 添加关键字段
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS job_summary TEXT;
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS team_info JSONB;
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS growth_opportunities TEXT[];
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS work_environment TEXT;
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS company_culture TEXT;
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS remote_policy TEXT;
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS interview_process JSONB;
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS contact_info JSONB;
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS urgency_level TEXT DEFAULT 'normal';
ALTER TABLE jobs ADD COLUMN IF NOT EXISTS expected_start_date DATE;
```

### 第2步：更新搜索函数

在Supabase控制台的SQL Editor中执行 `update-job-search-functions-for-enhanced-fields.sql` 文件，这将：
- 更新 `search_jobs_rpc` 函数
- 添加新字段到返回结果
- 构建丰富的 `full_text_content` 供rerank使用
- 添加新的筛选条件（紧急程度、远程政策）

## 📊 新增字段说明

| 字段名 | 类型 | 作用 | 重要程度 |
|--------|------|------|----------|
| `job_summary` | TEXT | 岗位亮点总结，AI理解岗位吸引力的核心 | ⭐⭐⭐⭐⭐ |
| `team_info` | JSONB | 团队信息，吸引候选人的重要因素 | ⭐⭐⭐⭐ |
| `growth_opportunities` | TEXT[] | 成长机会，吸引有上进心的候选人 | ⭐⭐⭐⭐ |
| `work_environment` | TEXT | 工作环境描述 | ⭐⭐⭐ |
| `company_culture` | TEXT | 公司文化，帮助文化匹配 | ⭐⭐⭐ |
| `remote_policy` | TEXT | 远程工作政策，现代工作的重要信息 | ⭐⭐⭐⭐ |
| `interview_process` | JSONB | 面试流程，帮助候选人准备 | ⭐⭐⭐ |
| `contact_info` | JSONB | 联系人信息，方便沟通 | ⭐⭐⭐ |
| `urgency_level` | TEXT | 紧急程度（urgent/normal/pipeline） | ⭐⭐ |
| `expected_start_date` | DATE | 期望入职时间 | ⭐⭐ |

## 💡 理想的岗位JSON录入格式

```json
{
  "title": "资深后端工程师",
  "company": "创新科技有限公司",
  "location": "北京",
  "employment_type": "full_time",
  "salary_min": 35000,
  "salary_max": 50000,
  "currency": "CNY",
  "urgency_level": "urgent",
  "expected_start_date": "2024-08-01",
  
  "job_summary": "加入我们的核心技术团队，参与构建下一代云原生微服务架构。你将与顶尖工程师合作，使用最新技术栈解决百万级用户的技术挑战，并获得快速成长机会。",
  
  "description": "负责核心业务系统的后端开发，包括API设计、数据库优化、系统架构设计等。",
  
  "requirements": "5年以上后端开发经验，精通Go或Java，熟悉微服务架构，有大型系统开发经验。",
  
  "skills_required": [
    "Go (Gin, gRPC)",
    "Java (Spring Boot, Spring Cloud)",
    "数据库 (MySQL, Redis)",
    "容器化 (Docker, Kubernetes)",
    "消息队列 (Kafka, RabbitMQ)"
  ],
  
  "team_info": {
    "size": "12人技术团队",
    "lead_background": "前阿里P8技术专家，10年大厂经验",
    "team_culture": "技术驱动，扁平化管理，鼓励创新和试错",
    "tech_stack": ["Go", "Kubernetes", "MongoDB", "Kafka"],
    "work_style": "敏捷开发，双周迭代",
    "collaboration_tools": ["Slack", "Jira", "GitLab", "Confluence"]
  },
  
  "growth_opportunities": [
    "技术专家路线：架构师 → 首席架构师",
    "管理路线：Team Lead → 技术总监",
    "跨部门轮岗机会",
    "技术分享和开源项目参与",
    "年度技术大会参会机会"
  ],
  
  "work_environment": "现代化办公环境，配备最新MacBook Pro，双显示器，人体工学座椅。开放式办公区域，独立会议室，休闲茶水间。",
  
  "company_culture": "以技术为驱动的创新公司，崇尚工程师文化。扁平化管理，快速决策，鼓励试错和创新。定期技术分享，内部黑客马拉松。",
  
  "remote_policy": "混合办公模式，每周2-3天可居家办公，核心会议时间需在办公室。特殊情况支持全远程。",
  
  "benefits": "五险一金，补充商业保险，年终奖金，股票期权，带薪年假15天，培训津贴，健身房补贴。",
  
  "interview_process": {
    "rounds": "3轮面试",
    "duration": "2-3周完成",
    "format": "技术面试（线上/线下）+ HR面试 + 总监面试",
    "preparation": "准备代码样例，了解微服务架构，准备项目经历介绍",
    "stages": ["技术初面(1小时)", "技术深度面试(1.5小时)", "文化匹配面试(30分钟)"]
  },
  
  "contact_info": {
    "hr_name": "张小姐",
    "hr_email": "hr@company.com",
    "hr_phone": "+8613800138000",
    "hiring_manager_name": "李技术总监",
    "hiring_manager_email": "tech-lead@company.com",
    "wechat": "hr_zhang_123"
  },
  
  "experience_required": 5,
  "education_required": "本科及以上",
  "industry": "互联网",
  "department": "技术部"
}
```

## 🔄 升级后的岗位搜索流程

1. **向量搜索（召回）**: 基于整体语义相似度召回岗位
2. **Rerank（精排）**: 使用丰富的 `full_text_content` 进行精准排序
3. **分数计算**: 向量相似度(50%) + 增强Rerank(30%) + 语义匹配(20%)
4. **新增筛选**: 支持紧急程度、远程政策等筛选条件

## 📈 预期改进效果

- **岗位吸引力**: 从简单描述升级为全方位展示
- **匹配精度**: Rerank分数大幅提升，好岗位排名更高
- **候选人体验**: 完整信息让候选人做出更好的决策
- **筛选能力**: 新增多维度筛选条件

## 🌟 录入建议与最佳实践

### job_summary 写作技巧
- **第1句**: 核心价值主张（技术挑战、成长机会、团队优势）
- **第2句**: 具体工作内容亮点
- **第3句**: 候选人将获得的收益

### team_info 信息要点
- **团队规模**: 明确团队大小和结构
- **Leader背景**: 突出技术领导力
- **技术栈**: 列出主要使用的技术
- **工作方式**: 敏捷、瀑布等开发模式

### growth_opportunities 设计原则
- **路径清晰**: 技术路线和管理路线并列
- **时间节点**: 如"1-2年内有晋升机会"
- **具体机会**: 培训、会议、项目等

## ✅ 完成状态检查清单

- [ ] 执行 `add-missing-job-fields.sql`（添加新字段）
- [ ] 执行 `update-job-search-functions-for-enhanced-fields.sql`（更新搜索函数）
- [ ] 测试岗位搜索功能是否正常
- [ ] 按新格式录入/更新岗位数据
- [ ] 验证新增筛选条件是否生效

执行完这些步骤后，你的岗位将在AI搜索中展现出强大的吸引力，优质岗位将脱颖而出！🚀 