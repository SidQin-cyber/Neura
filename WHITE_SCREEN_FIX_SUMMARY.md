# ç™½å±æ˜¾ç¤ºé—®é¢˜ä¿®å¤æ€»ç»“

## é—®é¢˜æè¿°
ç”¨æˆ·åœ¨å€™é€‰äººæœç´¢åŠŸèƒ½ä¸­é‡åˆ°ç™½å±æ˜¾ç¤ºé—®é¢˜ï¼š
- å€™é€‰äººç»“æœçŸ­æš‚æ˜¾ç¤ºåå˜æˆç™½å±
- æ— é”™è¯¯æ¶ˆæ¯ï¼Œç•Œé¢å®Œå…¨ç©ºç™½
- åç«¯APIå’Œé‡æ’åºç®—æ³•å·¥ä½œæ­£å¸¸

## æ ¹æœ¬åŸå› åˆ†æ
é€šè¿‡æ·±å…¥åˆ†æå‘ç°é—®é¢˜å‡ºç°åœ¨ `components/render-message.tsx` çš„å€™é€‰äººæ£€æµ‹é€»è¾‘ï¼š

### åŸæœ‰é—®é¢˜ä»£ç 
```typescript
// ç¬¬171-180è¡Œçš„åŸå§‹æ£€æµ‹é€»è¾‘
'name' in message.content[0] &&
'current_title' in message.content[0]  // ğŸš« è¿™ä¸ªå­—æ®µå¯èƒ½ä¸å­˜åœ¨æˆ–ä¸ºnull
```

### å®é™…APIè¿”å›æ•°æ®ç»“æ„
```json
{
  "id": "123",
  "name": "å¼ ä¸‰",
  "title": "å‰ç«¯å·¥ç¨‹å¸ˆ",        // æœ‰æ—¶æ˜¯ title
  "current_title": null,       // æœ‰æ—¶æ˜¯ current_titleï¼Œä¸”å¯èƒ½ä¸ºnull
  "match_score": 85,           // é‡æ’åºåçš„åˆ†æ•°å­—æ®µ
  "final_score": 0.89          // æœ€ç»ˆåŠ æƒåˆ†æ•°
}
```

## ä¿®å¤æ–¹æ¡ˆ

### 1. æ›´æ–°å€™é€‰äººæ£€æµ‹é€»è¾‘
**æ–‡ä»¶**: `components/render-message.tsx`

```typescript
// ä¿®å¤å‰ï¼šä¾èµ–å¯èƒ½ä¸å­˜åœ¨çš„ current_title å­—æ®µ
'current_title' in message.content[0]

// ä¿®å¤åï¼šä½¿ç”¨æ›´å¯é çš„è¯„åˆ†å­—æ®µæ£€æµ‹
('match_score' in message.content[0] || 'final_score' in message.content[0])
```

### 2. å¢å¼ºé”™è¯¯å¤„ç†
```typescript
try {
  return (
    <CandidateResultsSection
      candidates={message.content as any[]}
      // ... å…¶ä»–å±æ€§
    />
  )
} catch (error) {
  console.error('Error rendering candidate results:', error)
  return (
    <AnswerSection
      content="å€™é€‰äººç»“æœæ¸²æŸ“æ—¶å‡ºç°é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚"
      // ... é”™è¯¯å›é€€UI
    />
  )
}
```

### 3. ä¼˜åŒ–å­—æ®µæ˜ å°„é€»è¾‘
**æ–‡ä»¶**: `components/recruitment/candidate-card.tsx`

```typescript
// å®‰å…¨çš„å­—æ®µè®¿é—®å’Œé»˜è®¤å€¼
const candidateName = candidate.name || 'Unknown'
const candidateTitle = candidate.title || candidate.current_title || 'No Title'

// æ™ºèƒ½çš„è¯„åˆ†å­—æ®µå¤„ç†
const candidateMatchScore = candidate.match_score || 
  (candidate.final_score ? Math.round(candidate.final_score * 100) : 
   Math.round((candidate.similarity || 0) * 100))
```

### 4. ç±»å‹å…¼å®¹æ€§æ”¹è¿›
```typescript
// ä½¿ç”¨ any[] ç±»å‹ç¡®ä¿APIæ•°æ®å…¼å®¹æ€§
candidates={message.content as any[]}

// CandidateCardç»„ä»¶ä½¿ç”¨çµæ´»çš„ any ç±»å‹
candidate: any // å¤„ç†APIè¿”å›çš„åŠ¨æ€æ•°æ®ç»“æ„
```

## ä¿®å¤æ•ˆæœéªŒè¯

### æµ‹è¯•åœºæ™¯
1. âœ… æ ‡å‡†å­—æ®µå€™é€‰äºº (name + title + match_score)
2. âœ… å˜ä½“å­—æ®µå€™é€‰äºº (name + current_title + final_score)  
3. âœ… ç¼ºå¤±å­—æ®µå€™é€‰äºº (name + final_scoreï¼Œæ— title)
4. âœ… é”™è¯¯è¾¹ç•Œæµ‹è¯• (æ¸²æŸ“å¼‚å¸¸æ—¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯)

### æ£€æµ‹é€»è¾‘æµ‹è¯•ç»“æœ
```
ğŸ§ª æµ‹è¯•å€™é€‰äººæ£€æµ‹é€»è¾‘...
âœ… å€™é€‰äººæ£€æµ‹ç»“æœ: true
ğŸ“Š æµ‹è¯•æ•°æ®:
  - è§’è‰²: assistant
  - å†…å®¹ç±»å‹: Array
  - å†…å®¹é•¿åº¦: 3
  - ç¬¬ä¸€ä¸ªå…ƒç´ å­—æ®µ: ['id', 'name', 'title', 'location', 'years_of_experience', 'skills', 'match_score', 'final_score']

ğŸ¯ å€™é€‰äººå­—æ®µæ˜ å°„æµ‹è¯•:
  å€™é€‰äºº 1: å§“å: å¼ ä¸‰, èŒä½: é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ, åŒ¹é…åº¦: 85
  å€™é€‰äºº 2: å§“å: æå››, èŒä½: å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆ, åŒ¹é…åº¦: 72  
  å€™é€‰äºº 3: å§“å: ç‹äº”, èŒä½: No Title, åŒ¹é…åº¦: 68
```

## æŠ€æœ¯æ”¹è¿›äº®ç‚¹

### 1. æ›´å¥å£®çš„æ£€æµ‹é€»è¾‘
- **ä¹‹å‰**: ä¾èµ–å¯èƒ½ç¼ºå¤±çš„ `current_title` å­—æ®µ
- **ç°åœ¨**: ä½¿ç”¨å¿…ç„¶å­˜åœ¨çš„è¯„åˆ†å­—æ®µ (`match_score` æˆ– `final_score`)

### 2. å…¨é¢çš„é”™è¯¯å¤„ç†
- æ·»åŠ  try-catch åŒ…è£…æ¸²æŸ“é€»è¾‘
- æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯å›é€€ç•Œé¢
- ä¿ç•™è¯¦ç»†çš„æ§åˆ¶å°é”™è¯¯æ—¥å¿—

### 3. çµæ´»çš„æ•°æ®é€‚é…
- æ”¯æŒå¤šç§APIè¿”å›æ ¼å¼
- æ™ºèƒ½å­—æ®µæ˜ å°„å’Œé»˜è®¤å€¼å¤„ç†
- ç±»å‹å…¼å®¹æ€§ä¼˜åŒ–

### 4. æ¸è¿›å¼é™çº§
- ä¸»è¦å­—æ®µç¼ºå¤±æ—¶æ˜¾ç¤ºé»˜è®¤å€¼
- è¯„åˆ†å­—æ®µç¼ºå¤±æ—¶ä½¿ç”¨å¤‡é€‰è®¡ç®—æ–¹å¼
- ç¡®ä¿åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æœ‰åˆç†çš„æ˜¾ç¤º

## éƒ¨ç½²éªŒè¯

ä¿®å¤åéœ€è¦éªŒè¯ï¼š
1. ğŸ”„ é‡æ–°æœç´¢å€™é€‰äººï¼Œç¡®è®¤ä¸å†å‡ºç°ç™½å±
2. ğŸ”„ æ£€æŸ¥å€™é€‰äººå¡ç‰‡ä¿¡æ¯æ˜¾ç¤ºæ­£ç¡®
3. ğŸ”„ ç¡®è®¤åŒ¹é…åº¦åˆ†æ•°è®¡ç®—å‡†ç¡®
4. ğŸ”„ æµ‹è¯•è¾¹ç•Œæƒ…å†µï¼ˆç©ºç»“æœã€å¼‚å¸¸æ•°æ®ç­‰ï¼‰

## æ€»ç»“

æ­¤æ¬¡ä¿®å¤è§£å†³äº†å€™é€‰äººæœç´¢åŠŸèƒ½çš„å…³é”®æ¸²æŸ“é—®é¢˜ï¼Œé€šè¿‡ï¼š
- ğŸ¯ **ç²¾å‡†å®šä½**: è¯†åˆ«å‡ºæ£€æµ‹é€»è¾‘ä¸­çš„å­—æ®µä¾èµ–é—®é¢˜
- ğŸ›¡ï¸ **å¥å£®è®¾è®¡**: å¢åŠ é”™è¯¯å¤„ç†å’Œå…¼å®¹æ€§æ”¯æŒ  
- ğŸ”§ **å…¨é¢ä¿®å¤**: ä»æ£€æµ‹åˆ°æ¸²æŸ“çš„å®Œæ•´é“¾è·¯ä¼˜åŒ–
- âœ… **å……åˆ†éªŒè¯**: å¤šåœºæ™¯æµ‹è¯•ç¡®ä¿ä¿®å¤æ•ˆæœ

ç°åœ¨çš„å®ç°èƒ½å¤Ÿç¨³å®šå¤„ç†å„ç§APIè¿”å›æ ¼å¼ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€è‡´å¯é çš„å€™é€‰äººæœç´¢ä½“éªŒã€‚ 